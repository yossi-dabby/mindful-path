@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Neutrals (avoid pure white/black) */
    --bg: 248 248 246;          /* warm off-white */
    --surface: 255 255 253;     /* card surface */
    --surface-2: 244 244 241;   /* subtle alternative */
    --text: 34 39 46;           /* soft near-black */
    --muted: 102 112 133;       /* secondary text */
    --border: 226 228 233;      /* soft separators */

    /* Brand warmth (use sparingly) */
    --accent: 255 142 66;       /* warm orange */
    --accent-2: 255 205 102;    /* soft amber highlight */
    --accent-contrast: 255 255 255;

    /* Calming support tones */
    --calm: 93 156 236;         /* soft blue */
    --calm-2: 120 196 164;      /* muted green */

    /* Status (muted, non-alarming) */
    --success: 84 179 126;
    --warning: 243 179 74;
    --danger: 222 92 92;

    /* Focus ring (subtle) */
    --ring: 255 142 66;

    /* Radius scale (no sharp corners) */
    --r-xs: 10px;
    --r-sm: 14px;
    --r-md: 18px;
    --r-lg: 24px;
    --r-xl: 32px;

    /* Spacing scale (white space as a feature) */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-7: 32px;
    --space-8: 40px;
    --space-9: 48px;
    --space-10: 64px;

    /* Motion (slow, nervous-system aware) */
    --ease-calm: cubic-bezier(0.2, 0.8, 0.2, 1);
    --dur-fast: 150ms;
    --dur-med: 240ms;
    --dur-slow: 420ms;

    /* Legacy compatibility */
    --color-primary: 255 142 66;
    --color-secondary: 255 205 102;
    --color-accent: 93 156 236;
    --color-background: 248 248 246;
    --color-text: 34 39 46;
    --spacing-page: 2rem;
    --spacing-card: 2rem;
    --spacing-section: 3rem;
    --radius: 1rem;
    --radius-lg: 1.5rem;
    --radius-xl: 2rem;
  }

  .dark {
    /* Dark mode: deep blue-gray, not pure black */
    --bg: 12 18 28;
    --surface: 16 24 36;
    --surface-2: 20 30 44;
    --text: 235 240 246;
    --muted: 170 182 198;
    --border: 34 46 64;

    /* Accents: slightly desaturated and softer in dark */
    --accent: 255 160 92;
    --accent-2: 255 212 132;

    --calm: 120 176 246;
    --calm-2: 136 206 176;

    --danger: 234 116 116;
    --warning: 246 192 102;
    --success: 118 206 164;

    --ring: 255 160 92;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--text));
    font-size: 16px;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Headings with better spacing - rounded, friendly */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold;
    line-height: 1.3;
    letter-spacing: -0.02em;
    color: rgb(var(--text));
  }
  
  h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }
  
  h2 {
    font-size: 2rem;
    margin-bottom: 0.875rem;
  }
  
  h3 {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  /* Paragraph spacing - increased line height for calm reading */
  p {
    line-height: 1.7;
    margin-bottom: 1rem;
    color: rgb(var(--text));
  }
  
  /* Links with warm accent */
  a {
    transition: color var(--dur-med) var(--ease-calm);
    color: rgb(var(--accent));
  }
  
  a:hover {
    color: rgb(var(--accent-2));
  }
}

/* Custom utility classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Soft gradient backgrounds - CBT aligned */
  .bg-warm-gradient {
    background: linear-gradient(135deg, rgb(var(--bg)) 0%, rgb(248 244 238) 100%);
  }
  
  .bg-calm-gradient {
    background: linear-gradient(135deg, rgb(var(--bg)) 0%, rgb(240 247 255) 100%);
  }
  
  .bg-energy-gradient {
    background: linear-gradient(135deg, rgb(var(--bg)) 0%, rgb(255 250 235) 100%);
  }
  
  /* Enhanced spacing utilities */
  .page-container {
    padding: var(--space-6);
    max-width: 1280px;
    margin: 0 auto;
  }
  
  .card-spacing {
    padding: var(--space-6);
  }
  
  .section-spacing {
    margin-bottom: var(--space-7);
  }
  
  /* Calm transitions (nervous system aware) */
  .transition-calm {
    transition: all var(--dur-med) var(--ease-calm);
  }
  
  /* Breathing animation - slow, parasympathetic */
  @keyframes breathe {
    0%, 100% {
      transform: scale(1);
      opacity: 0.8;
    }
    50% {
      transform: scale(1.08);
      opacity: 1;
    }
  }
  
  .animate-breathe {
    animation: breathe 6s var(--ease-calm) infinite;
  }
  
  /* Icon stroke utilities */
  .icon-default {
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  /* Text truncation utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Safe area utilities for mobile */
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
    margin-bottom: 80px; /* Bottom nav height */
  }

  @media (min-width: 768px) {
    .safe-bottom {
      margin-bottom: 0; /* No bottom nav on desktop */
    }
  }

  /* Wizard action bar utilities */
  .safe-bottom-nav {
    padding-bottom: calc(84px + env(safe-area-inset-bottom, 0));
  }

  @media (min-width: 768px) {
    .safe-bottom-nav {
      padding-bottom: calc(12px + env(safe-area-inset-bottom, 0));
    }
  }
}

/* Scrollbar styling - soft and unobtrusive */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--accent) / 0.25);
  border-radius: var(--r-xs);
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--accent) / 0.4);
}

/* Focus styles - warm ring, no sharp edges */
*:focus-visible {
  outline: 2px solid rgb(var(--ring));
  outline-offset: 2px;
  border-radius: var(--r-xs);
}

/* Selection - warm accent */
::selection {
  background-color: rgb(var(--accent) / 0.2);
  color: rgb(var(--text));
}